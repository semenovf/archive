local lib = {};

function __FILE__() return debug.getinfo(2,'S').source end
function __LINE__() return debug.getinfo(2, 'l').currentline end

--
-- TODO Deprecated see die.lua
--
function lib.die (m)
    print("ERROR: " .. m);
    os.exit(1);
end

function lib.print_error (m)
    print("ERROR: " .. m);
end

function lib.throw (m)
    if m ~= nil and m:len() > 0 then
        error("ERROR: " .. m);
    else
        error("ERROR: exception!", 2);
    end
end

function lib.assert (predicate, m)
    if not predicate then
        if m ~= nil then
            if m:len() > 0 then lib.print_error(m); end
            os.exit(1);
        else
            assert(predicate);
        end
    end
end

function lib.is_valid_name (name)
    if type(name) ~= "string" then return false; end
    local r = name:match("^[%a%d_-]-$");
    
    if r == nil then
        -- lib.print_error(name .. ": invalid name");
        return false;
    end
    return true;
end

return lib;
